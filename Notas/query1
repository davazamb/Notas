var chequesConsolidado = await _context.Cheques
    .Include(c => c.Lote)
    .Include(c => c.Imagenes)
    .Where(c => c.Lote.InsertedAt.Date == fecha.Date && c.Lote.Pais == pais)
    .ToListAsync();

var chequesAgrupados = chequesConsolidado
    .GroupBy(c => c.Id)
    .Select(g =>
    {
        var cheque = g.First();
        cheque.Imagenes = g
            .SelectMany(x => x.Imagenes)
            .DistinctBy(i => i.Id)
            .ToList(); // ðŸ”§ Consolidar imÃ¡genes en memoria

        return cheque;
    })
    .ToList();




---------


var result = _context.RcmCaptureImages
    .Include(img => img.CiLoteNavigation)
    .Include(img => img.RcmCaptureImagePictures)
    .Where(img =>
        img.CiLoteNavigation != null &&
        img.CiLoteNavigation.ClProcessDate < parameters.DateInsert &&
        img.CiLoteNavigation.ClCountry == parameters.Country)
    .Select(img => new
    {
        CaptureImage = img,
        CaptureImagePictures = img.RcmCaptureImagePictures.ToList()
    })
    .Take(100)
    .ToList();